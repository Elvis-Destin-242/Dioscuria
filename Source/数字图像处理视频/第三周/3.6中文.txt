我们来讲解一些 非常简单而有趣的均值滤波(Mean filtering)的性质 也就是局部平均(local averaging)
我们这就开始吧 大家看到这个标题 “取平均 高斯滤波(Gaussian Filter) 和热流(Heat Flow)” 我们会一一进行解释
不过我们首先从 一个很简单的练习讲起
假设我给你三个数字 1 2 和3
然后我要提这样一个问题 我需要你找到一个数字a 使(a -1)^2 + (a - 2)^2 + (a - 3)^2取得其最小值 找到这个数字 如果你需要进行大量计算的话 我希望你回答我说 不 我不知道怎样迅速解决它 也就是说 你可以选择说 不 我不知道怎样即刻或快速解决它
或回答是的我知道 所以否是一个选项 如果你知道怎么快速解决它的话 是也是一个选项 我的非常快速指的是 你只是心算 而不进行笔算或其他什么运算 你可以选择 是 a为0 是 a为2 和 是 a为4 来看一下你知不知道答案
好的 我们来解释一下吧
答案是2 我怎么解出来的？
因为这是这三个数字的平均数 能使这个求和等式取最小值的数字 是这三个数的平均数
这是个很有趣的性质 它通常被表述如下
给定一组数 称它们为ai a下标i 求数字a 使在i取所有值时 (a-ai)^2的总和为最小值 这个式子的结果是a的平均值
所以我要找的这个数字 就是我所有数字的平均值
所以你只需将所有数字求和 除以ai的个数 这其实不难证明 如果你对微积分还有些印象 非常初级的微积分
你把它定义为N 并对a进行求导 令导数值为0 你会发现所得结果就是平均值 这很有意思 当我们处理图像时
假设是 3 x 3平均 用这九个数字的平均值代替这个 我所做的其实是用一个数字来代替这个像素值 以最小化平方差 这就是所谓的均方差
记住 我们在做压缩时曾说到它 再说一次 这是个用求导就可以证明的 简单等式
这就是平均数的一个有趣的特征 我们所做的图像处理 其实就是在找能代替它的值 这就会变得很有趣
我们会在接下来的几个视频里看到 如果采用其它方法来计算误差的话 我们能够找到它的其他替换值
这就是取平均的 一个有趣的性质
我们再来看一个不同的性质 再次强调 我们是在一个窗口中取平均 它可以是 3 x 3, 5 x 5, 10 x 10
是个窗口就可以 我们所做的其实是卷积 对那些有点信号处理(Signal processing)基础的同学来讲
这并不令人惊讶 但是我会通过 一种略有不同的卷积运算来解释这一点 我们的思路是 我们取图像(x,y) 并用滤波器对其进行卷积
我们用所谓的高斯滤波器 进行卷积操作
就是一个均值为0 方差为某数的 高斯函数
记住 高斯函数的形式 就是这样 好的 这是我们所知的最简单的函数之一 这是一个加权平均数
在离散形式下 我们不让每个地方的权重都为1 而是使用高斯函数所提供的权值 这样我们会得到一个叫做(x,y, sigma)的新函数 因为这个函数是基于高斯函数的 我们可以取一个普通意义上的平均
但更好 更讲究的方法是 用高斯滤波来解析它 所以我们这样做的时候 就是在做加权平均 我们用一个像素周围的加权平均数来取代它 这就是我们正在做的 这个函数很有意思
再次强调 这里是(x, y, sigma) 是因为它基于高斯函数的方差
我们在这里写一些有趣的东西 你可能记得所谓的热流 如果不记得了 我接下来会解释一下 我会把它写下来然后解释给大家听 我们开始写了 我特意使用相同的符号 我这里要写的函数f 随时间变化 所以我这里依据f的拉普拉斯算子(Laplacian) 对时间进行求导
它就等于 f分别对x和对y的二阶导数之和 图像依据拉普拉斯算子进行变化 我只是观察x方向上的变化 求二阶导数 同样地 观察y方向上的变化 求该方向上的二阶导数
使变化加倍 这就是所谓的热流
你可能记得 热流的性质基本都是在讲扩散 就像是你的房间有热量 而热量在其中扩散 如果所有东西都是单折射性的 那什么都不会阻止它 它们依据这个等式来扩散
为什么我写下这个呢？ 这是因为高斯滤波满足这个等式 这很有趣 而且它是由时间变化决定的 你这里扩散得更充分 就等同于有一个大的sigma 或者说一个大的方差 再次强调 用高斯滤波器进行这个局部平均所得的结果 等同于把图像的像素值 灰度值想象成热量 让它遵循着热流来运作 也就是遵循这个等式
这两个是等价的运算 如果我们让它运作一段时间
再讲一次 这里像素值是热量 它运作一段时间 这就等同于 选择一个完全由时间决定的方差 并对图像做高斯滤波 所以像素值的扩散就像是热量基于热流的扩散 这两个大致相通 这也是不难证明的 如果你想再看一个有趣的练习 可以用这个表达式代替f
就是说 我们进行求导 但不是对t求导 而是对sigma求导 在这里则对x和y求导 你就会发现这满足这个等式
这是因为求导是线性的 这是一个线性运算
如果你不清楚怎么做 就把它当做一个给那些 想在与此视频有关的数学上稍稍深入的人的练习吧 这个很有趣的原因是 像我们接下来几周会了解到的那样 有些人可能会问 你刚才讲到 局部图像处理与热流有关
也许我可以设计一个与此不同的等式 来做另外一些有趣的图像处理 我们会看到这是有可能的
一样的 它会涉及到更高等的数学知识 接下来几周会讲到它们 那么我们已经学会了局部平均的一些有趣性质 第一点 其类似于计算平均数 使一定区域内 均方差取最小值
第二点是 像素值和热量之间有相通的地方 所以局部平均就是在扩散像素值 这就是为什么它使图像变模糊了
如果你记得 我们看到它使图像模糊 就是因为像素值被扩散了
我们也知道 这同样适用于热量
如果在开始时 一个地方热 而另一个地方冷
热流会使热量扩散 使之变得更均衡
当然 如果你等足够长时间 那就等价于有一个很大的方差 那我们就会得到平均数
那就得到的就是 整个图像的均值
像我们说过的那样 这就是一些 有趣的局部平均的性质
接下来 我们会看到不同类型的局部运算 它们能让我们使边缘不变模糊 下次视频见 谢谢
// 果壳教育无边界字幕组 | leafsherry | 风过成伤 | zeadoit
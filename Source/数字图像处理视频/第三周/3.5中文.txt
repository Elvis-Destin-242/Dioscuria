当谈到直方图修正 无论是直方图均衡化 还是直方图匹配 我们只依据像素的灰度值本身进行替换 而不会考虑该像素周围的图像区域 接下来我们要做的 是空间操作 我们将 依据给定像素周围的情况 替换其像素值 所以 邻域就会产生影响 假如我们有一幅完整的图像 考虑这个像素 这里是这一部分的放大图 或者观察这里 我们会根据这个像素的周围像素 决定如何替换它的像素值 那就不再是我行我素了 不再是只根据像素值本身来决定如何变化 像素的改变将依赖于邻域像素 最简单的处理方式就是取平均值 所以我们可以将这个像素值 比如说 替换为 它附近 3x3 区域内像素值的平均值 当然 我们需要归一化 如果是对 9 个像素取平均 我们就要除以9 我们还可以做加权平均 比如在某种情况下 像素本身的权重是4 而 4邻域中的像素 我们讨论过 4邻域 和 8邻域结构 4邻域中的像素 按权重为2 来计算 对角线上的像素 其权重为1 这样我们就分配好了16个权 1+2是3 再+1是4 再+2是6 以此类推 所以我们需要除以16进行归一化 这个是直接平均 而这个是加权平均 让我们看看真实图像中情况是怎样的 这有一张图片 这是一个很好的示例图像 因为它上面有一系列不同大小的结构体 然后我们看一下其余这些经过局部平均处理的图像 每一个图像中我们选取不同大小的邻域 大小从 3x3 到 35x35 这是3、5、9、15 和35 我们选取的区域从 3x3 到 35x35 邻域越大 平均处理的像素就越多 我们可以看到最终的效果 当平均的区域大小是 3x3 时 我们看不出什么变化 虽然这些轮廓清晰的区域有一点变化 但先让我们来看看35 经过 35x35 大小的窗口 也就是 35x35 邻域处理后 我们看到很多东西变得模糊了 我很快会解释这是为什么 直观上让你理解背后的原理 可以看到 很多的结构都变得模糊了 如果我们只用 15x15 的邻域处理 只会有较少的结构变得模糊 比如 我们可以看到 这儿的竖条要比那儿的更容易辨认 那取决于物体间的距离 为什么会变得模糊呢？ 因为 拿这一点当例子 想象它周围有一扇 35x35 的窗口 我们将该黑色像素点的周围的灰色区域取平均 使得这一点变得更亮 这儿非常暗 是黑色 这比较亮 如果我们平均它周围的像素值 那么这个像素值会增大 当我们在这做平均处理时 因为这周围的像素是黑色的 那么平均来说这里就会变暗 接着我来解释模糊现象 让我用一个一维函数来说明 如果我取这一点 这点 和这点进行平均 很明显 这一点的像素值会变小 因为这一点的影响 因此这一点的灰度值 会被这附近的灰度值代替 如果我将这一点 和这一点 还有这里的像素点取平均 那么它的值会变大一些 于是这个极端陡峭的曲线 会变得比较平滑 这正是因为我们做了平均 我们将在 课程的第二部分了解到 怎样在平均处理时避免模糊现象 但这只用来描述邻域平均中 一种非常简单的操作 以及邻域的大小是怎样影响像素的 现在 你可能会问 这个操作重要么？ 答案是相当重要 虽然会有模糊现象 但我们基本上 不会用 35x35 的窗口做平均处理 对特定的问题 我们需要设计出合适大小的窗口 比如 在这张图上 我们想要去除那些非常小的物体 可能那些是噪点 或是一些星球 亦或是一些小颗粒 总之我们不在意 接着我们就可以对这个图像做局部滤波处理 在这个例子中 我们使用了 15x15 大小的窗口 虽然这张图片变得模糊了 但是我们去除了这些小颗粒 这儿的一个小颗粒会被周围的深色像素平均化 接着 它的灰度值就会变得非常小 非常接近于0 当我对其阈值处理后 我基本上得到了我想要的区域 也就是更大 更明亮的区域 首先我们模糊化 然后做阈值处理 这样我们可以去除噪点 得到图像中对我们最重要的物体 这个简单操作对这样的任务非常有效 更有趣的是 这个非常简单的平均处理 有着很有趣的数学特性 我会在接下来解释这一点 这些性质非常重要 因为它们能帮助我们开发其它类型的平均处理 比如 不会模糊边缘的平均处理 我们将在下一次视频中解释这些数学性质 以及简单的平均操作与其它结构的关系 谢谢大家 // 果壳教育无边界字幕组 | 玉米Yummy | 某音某莹 | 小白_远游
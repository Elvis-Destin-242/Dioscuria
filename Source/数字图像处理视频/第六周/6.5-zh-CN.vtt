WEBVTT

1
00:00:00.000 --> 00:00:04.114
【未完成版本】大家好 欢迎回来 我们刚刚学习过了曲线演化 

2
00:00:04.114 --> 00:00:07.622
还有一个知识点我们刚刚略过了是需要学习的 

3
00:00:07.622 --> 00:00:11.332
那就是我们如何在计算机上实现曲线演化 

4
00:00:11.332 --> 00:00:15.177
我们已经知道曲线演化是很重要的 

5
00:00:15.177 --> 00:00:20.506
例如使用配合曲率运动来调控曲线 在主动轮廓中则有更重要的作用 

6
00:00:20.506 --> 00:00:24.620
我们也需要学习  

7
00:00:24.620 --> 00:00:29.207
如何用一种友好的形式将其实现出来 因为在计算机中只有离散图像 

8
00:00:29.207 --> 00:00:33.390
所以我们将会谈谈它的数值实现 

9
00:00:33.390 --> 00:00:39.149
当我们讲解偏微分方程在图像处理中的应用时 

10
00:00:39.149 --> 00:00:44.908
有一个对于图像处理有着极大影响的领域 也就是水平集方法 

11
00:00:44.908 --> 00:00:49.909
我们来谈谈这个方法 有了这个方法 我们将会知道 

12
00:00:49.909 --> 00:00:54.683
如何将任意曲线曲面演化在计算机中实现出来 

13
00:00:54.683 --> 00:00:59.230
那么水平集的理论和框架是什么呢？ 

14
00:00:59.230 --> 00:01:04.631
我们来讨论一下曲线的情况 因为曲线的情况相对曲面来讲简单许多 

15
00:01:04.631 --> 00:01:07.886
不过曲面情况的原理是差不多的 

16
00:01:07.886 --> 00:01:11.734
我们已经谈过曲线以及曲线的表示 

17
00:01:11.734 --> 00:01:17.357
这里我们可以看到 这是一条已经参数方程化的曲线 

18
00:01:17.357 --> 00:01:21.574
对于每一个 p 都对应着曲线上不同的点 

19
00:01:21.574 --> 00:01:25.200
不过现在这不是唯一能表示曲线的方法了 

20
00:01:25.200 --> 00:01:31.451
还有一种非常不同的方法可以表示完全相同的一条曲线 

21
00:01:31.451 --> 00:01:35.432
实际上当我们讨论形状的时候我们会更熟悉它 

22
00:01:35.432 --> 00:01:41.174
它的基本原理 并不参数方程化曲线 

23
00:01:41.174 --> 00:01:47.298
而是将曲线表达为 平面上所有使得特定方程等于 0 的点 

24
00:01:47.298 --> 00:01:50.623
让我们来看看这张图片 

25
00:01:50.623 --> 00:02:00.125
我们在这里放下一个坐标系 x 和 y 然后我们说 

26
00:02:00.125 --> 00:02:05.494
所有在曲线上的点都使得函数 phi 在这个点的值为 0 

27
00:02:05.494 --> 00:02:11.957
那么我们得描述这个函数 phi 例如 我们可以定义 

28
00:02:11.957 --> 00:02:18.421
内部的点使得函数的值为正 外部的点则使得函数的值为负 

29
00:02:18.421 --> 00:02:25.276
比如我们可以定义这是到曲线的距离 

30
00:02:25.276 --> 00:02:31.344
显然曲线到自身的距离为 0 因为一个点到自己的距离为 0 

31
00:02:31.344 --> 00:02:36.118
所以 所有在曲线上的点到曲线的距离都是 0 

32
00:02:36.118 --> 00:02:41.862
所有内部的点都有着大于 0 的距离 

33
00:02:41.862 --> 00:02:47.850
并且我们定义外部的点有着小于 0 距离 用这种方式 我们可以定义函数 phi 

34
00:02:47.850 --> 00:02:53.903
这个零集合被叫做这个函数的零水平集 

35
00:02:53.903 --> 00:02:58.973
表示使得这个函数值为 0 的所有平面上的点定义的一条曲线 

36
00:02:58.973 --> 00:03:04.951
让我们来看看这里的这个剖面 

37
00:03:04.951 --> 00:03:11.004
如果我们有一个函数是里面是正的外面是负的 我用一条直线剖开它 

38
00:03:11.004 --> 00:03:14.810
那就可以得到一个剖面 函数从负值变化到正值 

39
00:03:14.810 --> 00:03:20.157
所以这个区域都是正的 接下来又到了外面 

40
00:03:20.157 --> 00:03:24.342
所以又变成了负值 之后又进入到内部 然后又到了外部 

41
00:03:24.342 --> 00:03:28.062
那么 哪些点是在曲线上的呢？ 

42
00:03:28.062 --> 00:03:31.240
这个点 它是 0 

43
00:03:31.240 --> 00:03:37.747
这个点 这个点 还有这个点 剖面的 phi 函数每一次经过 0 线的时候 

44
00:03:37.747 --> 00:03:41.245
对应的那个点就是在曲面上的 

45
00:03:41.245 --> 00:03:47.671
这样 啊 不好意思 应该是在曲线上 当然如果在更高维度下这就是曲面了 

46
00:03:47.671 --> 00:03:51.250
这样 我们就用这种使得某个函数的值为 0 的形式 

47
00:03:51.250 --> 00:03:57.513
定义了平面上的曲线 

48
00:03:57.513 --> 00:04:03.451
这只是两种对同一条曲线的不同表达 

49
00:04:03.451 --> 00:04:07.393
这就好像在曲线内部涂色 

50
00:04:07.393 --> 00:04:13.970
和在曲线外部涂色 

51
00:04:13.970 --> 00:04:15.450
而在曲线上涂的就是等于 0 

52
00:04:15.450 --> 00:04:19.890
现在有了这种表示方法 我们还得计算切线、法线和曲率 

53
00:04:19.890 --> 00:04:24.640
我们需要用这种表达来计算它们  

54
00:04:24.640 --> 00:04:28.217
否则我们没法做曲线演化 让我们来学习这些内容 

55
00:04:28.217 --> 00:04:30.746
我们需要先证明一些东西 

56
00:04:30.746 --> 00:04:34.693
就像我之前提过的 这周的课程是最理论化的一周了 

57
00:04:34.693 --> 00:04:37.345
不过我们要讲的都是自含的 

58
00:04:37.345 --> 00:04:42.094
那么我来讲讲里面发生的事情 我觉得我们学了挺多的新概念了 

59
00:04:42.094 --> 00:04:45.934
那我们就开始讲解这个 

60
00:04:45.934 --> 00:04:52.230
当然如前所述 曲线是由函数 phi 的水平集来定义的 

61
00:04:52.230 --> 00:04:57.473
法线实际上就是 phi 的梯度除以幅度 当然还要加上负号 

62
00:04:57.473 --> 00:05:01.551
这是一个惯例 因为我们需要法线是朝里面的 

63
00:05:01.551 --> 00:05:05.972
这只是个惯例 接下来切线自然就是这个了 

64
00:05:05.972 --> 00:05:12.378
这是一个垂直向量 让我们来证明这个 这证明起来并不困难 

65
00:05:12.378 --> 00:05:19.367
首先 我们有函数 phi 并且所有在曲线上的点都会使得 phi 的值为 0 

66
00:05:19.367 --> 00:05:25.600
所以沿着曲线的话 phi 的值是不会变化的 

67
00:05:25.600 --> 00:05:29.729
它总是 0 如果我沿着曲线走 总会得到 0 

68
00:05:29.729 --> 00:05:32.923
那么 函数的导数就是沿着曲线的 

69
00:05:32.923 --> 00:05:35.636
沿着弧长 

70
00:05:35.636 --> 00:05:39.267
因为我们是沿着函数值为 0 的曲线走 

71
00:05:39.267 --> 00:05:44.086
我们来算一下导数 我希望计算这个函数的导数 

72
00:05:44.086 --> 00:05:47.368
请记住 这个函数是存在于整个平面上的 

73
00:05:47.368 --> 00:05:52.745
我将要求沿着曲线弧长的方向的导数 

74
00:05:52.745 --> 00:05:56.769
那这个就是了 

75
00:05:56.769 --> 00:06:00.013
这是链式法则 基础微积分 

76
00:06:00.013 --> 00:06:03.861
如果我要求对 s 的导数 

77
00:06:03.861 --> 00:06:09.520
那这个导数就是先对 x 求导数 然后 x 再对 s 求导数 y 是一样的 

78
00:06:09.520 --> 00:06:14.198
这是一个简单的微积分 接下来 我这里写的是内积 

79
00:06:14.198 --> 00:06:17.367
内积是对两个向量的操作 

80
00:06:17.367 --> 00:06:20.913
如果大家不太记得的话 我把这个写下来 

81
00:06:20.913 --> 00:06:24.718
如果我要把向量两个向量乘起来 这是a、b 

82
00:06:24.718 --> 00:06:31.272
我实际上是要求内积 那么假如跟c、d相乘 那么就是 a * c + b * d 

83
00:06:31.272 --> 00:06:37.912
就是这样 现在这是 phi 的梯度和切线的内积 

84
00:06:37.912 --> 00:06:41.965
xs 和 ys 是切线 是单位切线 

85
00:06:41.965 --> 00:06:47.311
我们之前在谈平面微分几何曲线的时候 

86
00:06:47.311 --> 00:06:51.968
已经见过这个了 

87
00:06:51.968 --> 00:06:57.315
phi x 和 phi y 只是梯度 这就是为何我们得到了这个 

88
00:06:57.315 --> 00:07:02.984
那么这个是 0 从这里可以看到 

89
00:07:02.984 --> 00:07:07.698
当然这个也是 0 我们从这里到这里 

90
00:07:07.698 --> 00:07:14.398
当然 我还可以对它归一化 这样我就证明了 

91
00:07:14.398 --> 00:07:17.736
曲线的梯度是垂直于切线的 

92
00:07:17.736 --> 00:07:22.505
然后我们对梯度归一化 如果我有一个跟别的向量垂直的向量 

93
00:07:22.505 --> 00:07:27.752
显然 任何对这个向量进行幅长的变化不会影响垂直的关系 

94
00:07:27.752 --> 00:07:32.839
特别地 我想要把它 

95
00:07:32.839 --> 00:07:38.005
归一化成单位向量 这个仍然是等于 0 的 

96
00:07:38.005 --> 00:07:43.278
如果这个跟切线垂直 那它自然也就是法线了 

97
00:07:43.278 --> 00:07:46.483
我们这里是垂直的 所以它就是法线 

98
00:07:46.483 --> 00:07:52.223
再一次地 按照惯例加上一个负号 

99
00:07:52.223 --> 00:07:58.112
如果我们区分正负 我们希望这个梯度指向 

100
00:07:58.112 --> 00:08:03.107
我们希望这个法线指向内部 这是个惯例 

101
00:08:03.107 --> 00:08:06.760
这样我们就用一个简单的证明展示了这个 

102
00:08:06.760 --> 00:08:11.640
这就是法线的定义 如果我们有了 phi 毫无疑问我们就可以算出法线 

103
00:08:11.640 --> 00:08:16.456
当然我们也可以计算出切线 因为切线跟法线相互垂直 

104
00:08:16.456 --> 00:08:21.118
我们有了这个 

105
00:08:21.118 --> 00:08:23.446
啊两个 法线和切线 

106
00:08:23.446 --> 00:08:29.079
现在让我们来计算曲率 这也是一个很简单的计算 就像刚刚的那些一样 

107
00:08:29.079 --> 00:08:32.909
最多就多两三步 我们就能算出曲率 

108
00:08:32.909 --> 00:08:37.409
我们这里要求的是曲率 

109
00:08:37.409 --> 00:08:45.568
我们现在只有 phi 函数 曲率是对 s 的二阶导数 

110
00:08:45.568 --> 00:08:49.648
所以曲率就是 这里 Css 等于 K N 

111
00:08:49.648 --> 00:08:51.624
这就是曲率 

112
00:08:51.624 --> 00:08:54.773
这个是我需要计算的 但是我没有C 

113
00:08:54.773 --> 00:08:59.780
我们只有 phi 函数 我们有 C 也就是曲线 

114
00:08:59.780 --> 00:09:05.595
也就是隐含在函数 phi 里的零水平集 我想要证明这就是其对应的公式 

115
00:09:05.595 --> 00:09:09.390
有些同学可能不知道 div 是什么 

116
00:09:09.390 --> 00:09:16.669
div 就是散度 一个向量 alpha beta的散度 

117
00:09:16.669 --> 00:09:22.891
其实就是alpha x + beta y 所以这是一个标量 

118
00:09:22.891 --> 00:09:29.315
对于向量中的第一维 我们用它对 x 方向求导数 

119
00:09:29.315 --> 00:09:33.372
对于第二维 我们把它对 y 求导数 

120
00:09:33.372 --> 00:09:34.724
好的 

121
00:09:34.724 --> 00:09:41.148
让我们来证明这个公式是对的 

122
00:09:41.148 --> 00:09:46.219
因为我们还是沿着零水平集 所以我们仍然有这个关系 

123
00:09:46.219 --> 00:09:51.122
我们可以利用这个关系 

124
00:09:51.122 --> 00:09:55.648
我们要对 phi 求沿着曲线弧长的二阶导数 

125
00:09:55.648 --> 00:10:01.251
为了计算法线 我们已经在前一页演示稿里求出了一阶导数 

126
00:10:01.251 --> 00:10:04.016
现在我们要计算二阶导数 

127
00:10:04.016 --> 00:10:07.508
所以我们只需要对一阶导数再求一次导数 

128
00:10:07.508 --> 00:10:12.456
这部分其实就是 

129
00:10:12.456 --> 00:10:18.350
梯度和 T 的内积 我们之前已经见过了 我们现在要对这个求导数 

130
00:10:18.350 --> 00:10:23.724
内积的导数实际上就是 

131
00:10:23.724 --> 00:10:31.467
第一个分量的导数乘以第二个分量 再加上第一个分量乘以第二个分量的导数 

132
00:10:31.467 --> 00:10:36.500
那切线的导数是什么呢？ 

133
00:10:36.500 --> 00:10:40.811
二阶导数是在法线方向上的曲率 

134
00:10:40.811 --> 00:10:44.553
那这里也就是在法线方向上的曲率 

135
00:10:44.553 --> 00:10:51.104
再来一次 第一个分量与切线的内积 

136
00:10:51.104 --> 00:10:57.459
和第一个分量与第二个分量的导数的内积 

137
00:10:57.459 --> 00:11:01.780
第二个分量实际上就是 T 我们还知道 T 的导数是 kN 

138
00:11:01.780 --> 00:11:08.135
并且因为这个是等于 0 的 所以我们这里其实也是等于 0 的 

139
00:11:08.135 --> 00:11:16.060
那么就变成了 这一项的等于这一项 

140
00:11:16.060 --> 00:11:22.880
我把这个写在下面了 我们可以把曲率提出来 

141
00:11:22.880 --> 00:11:24.688
这没有任何问题 

142
00:11:24.688 --> 00:11:28.096
因为它是一个标量 我们可以把它从内积中提出来 

143
00:11:28.096 --> 00:11:30.670
这是我们要做的第一件事 

144
00:11:30.670 --> 00:11:35.523
噢 不好意思 这里有个笔误 这个应该是 phi 

145
00:11:35.523 --> 00:11:40.973
应该是一个大写的 phi 不好意思打错了 

146
00:11:40.973 --> 00:11:45.997
我们继续 很容易看出来 

147
00:11:45.997 --> 00:11:52.469
这一步有个笔误 我们把曲率提取出来了 

148
00:11:52.469 --> 00:11:56.642
把它放在这里 然后这个对应这个 

149
00:11:56.642 --> 00:12:02.773
我们在前一页见过 法线是梯度除以梯度(的模) 

150
00:12:02.773 --> 00:12:05.815
那么我们就得到了曲率 

151
00:12:05.815 --> 00:12:12.728
现在这个积实际上是梯度的平方 因为我们这里让它乘上了自己 

152
00:12:12.728 --> 00:12:19.817
所以这是梯度的平方除以梯度(的模) 其中一个梯度被抵消了 

153
00:12:19.817 --> 00:12:23.160
我们就剩下一个梯度(的模) 所以这一项就是这个 

154
00:12:23.160 --> 00:12:27.387
我没有把这一项写下来 

155
00:12:27.387 --> 00:12:33.650
但是现在同学们已经是专家啦 因为我们只要求导数和链式法则就可以了 

156
00:12:33.650 --> 00:12:39.835
如果我们要求梯度对 s 的导数 

157
00:12:39.835 --> 00:12:46.176
我们只要求它对 x 的导数然后 xs 加上对 y 的导数 以及 ys 

158
00:12:46.176 --> 00:12:49.621
【未完成版本】我们只要再做一遍链式法则 

159
00:12:49.621 --> 00:12:54.734
然后就可以得到这个表达式 这个表达式其实就是它的导数 

160
00:12:54.734 --> 00:12:58.175
然后切线我们之前已经得到过了 

161
00:12:58.175 --> 00:13:03.738
我们有了这个等式之后 

162
00:13:03.738 --> 00:13:11.200
把这个按定义展开 我们就会看到它跟这个式子是一样的 

163
00:13:11.200 --> 00:13:16.122
还要乘以这部分 我们这样就从 

164
00:13:16.122 --> 00:13:21.880
曲线的隐式方程得到了曲率的公式 

165
00:13:21.880 --> 00:13:26.660
请注意这个非常非常重要 

166
00:13:26.660 --> 00:13:30.902
讲到水平集上的曲线形成的时候 这就非常重要了 

167
00:13:30.902 --> 00:13:34.405
我并不需要知道曲线 我也不知道C 

168
00:13:34.405 --> 00:13:40.095
C是一个隐式的定义 我需要知道的是 phi 函数 

169
00:13:40.095 --> 00:13:44.077
然后我们对 x 方向求导数 对 y 方向求导数 

170
00:13:44.077 --> 00:13:48.548
我们知道这些方法 那么这是 x 方向 这是 y 方向 

171
00:13:48.548 --> 00:13:51.972
就如我们在这门课里已经见过很多次那样 

172
00:13:51.972 --> 00:13:54.906
我们就求导数就可以了 

173
00:13:54.906 --> 00:14:00.355
这个像素减去这个像素 或者 用这个像素减去这个像素 

174
00:14:00.355 --> 00:14:05.176
如果要求 y 方向上导数 我们已经做过很多次了 

175
00:14:05.176 --> 00:14:08.530
直接套公式我们就可以得到曲率 

176
00:14:08.530 --> 00:14:13.913
或者得到法线或者得到切线 这真的很简单 

177
00:14:13.913 --> 00:14:17.359
我都不用沿着曲线求导 

178
00:14:17.359 --> 00:14:21.379
我们对这些格子求导 实际上是对图像求导 

179
00:14:21.379 --> 00:14:26.261
非常非常简单 现在我们已经知道了曲率 知道了法线 

180
00:14:26.261 --> 00:14:29.132
我们知道如何使曲线变形吗？ 

181
00:14:29.132 --> 00:14:34.192
让我们来看看这个 我们下一步要学习的是 

182
00:14:34.192 --> 00:14:40.507
如何使曲线变形 如何使得 phi 变化到 

183
00:14:40.507 --> 00:14:44.849
我们希望的一个边界上去 

184
00:14:44.849 --> 00:14:51.560
我们已经有了一个表达曲线的隐函数 

185
00:14:51.560 --> 00:14:55.365
我们知道曲线是用这种方式定义的 

186
00:14:55.365 --> 00:15:00.142
它随着速率而变化 我们得问问自己 

187
00:15:00.142 --> 00:15:07.833
我们如何根据这个速率来改变 phi 进而改变 phi 的水平集呢？ 

188
00:15:07.833 --> 00:15:11.638
结果就是这个形式 

189
00:15:11.638 --> 00:15:16.334
我们用几行就可以证明这个 

190
00:15:16.334 --> 00:15:21.840
在那之前 我们需要注意这里发生了什么 

191
00:15:21.840 --> 00:15:25.692
phi 是定义在整个图像上的 

192
00:15:25.692 --> 00:15:30.285
它遍布于整个格子上 我每次说求导的时候 

193
00:15:30.285 --> 00:15:33.397
我实际上在说对栅格求导数 

194
00:15:33.397 --> 00:15:39.175
所以像素实际上是上下移动 这样曲线就没有导数 

195
00:15:39.175 --> 00:15:43.472
导致非常难以实现 这就像 我们知道 

196
00:15:43.472 --> 00:15:48.732
我们已经知道如何计算梯度 同样这里得加一个负号 

197
00:15:48.732 --> 00:15:53.696
我们知道这些东西 所以比起这个 要实现这些会更简单 

198
00:15:53.696 --> 00:15:58.010
让我们来证明这个公式 

199
00:15:58.010 --> 00:16:03.489
其基本原理还是很简单 

200
00:16:03.489 --> 00:16:09.303
我需要求 phi 对 t 的导数 

201
00:16:09.303 --> 00:16:11.901
这是我要用的 

202
00:16:11.901 --> 00:16:16.277
我们把这边对 t 求导 

203
00:16:16.277 --> 00:16:20.322
然后把这边也对 t 求导 这边是 0 

204
00:16:20.322 --> 00:16:23.969
是一个常量 所以这边的导数还是 0 

205
00:16:23.969 --> 00:16:25.030
就是这个 

206
00:16:25.030 --> 00:16:30.789
这部分的导数 我将其写在这里 再用一次链式法则 

207
00:16:30.789 --> 00:16:35.012
这个关于 x y t 的函数的对 t 求导数 

208
00:16:35.012 --> 00:16:38.468
就得到这里的这个式子 

209
00:16:38.468 --> 00:16:44.764
我们先对 x 求导 然后得到 xt 加上 

210
00:16:44.764 --> 00:16:49.832
对 y 的导数 乘以 yt 加上对t的导数 这些都是偏导数 

211
00:16:49.832 --> 00:16:52.290
于是我们就有了这个 

212
00:16:52.290 --> 00:16:58.466
我们把这个移到另一边 因为这边是 0 所以我们得到了 

213
00:16:58.466 --> 00:17:02.346
负的这个对 t 的导数 然后等于右边的项 

214
00:17:02.346 --> 00:17:07.568
所以这一部分等于这部分的相反数 这部分我们之前已经见到过 

215
00:17:07.568 --> 00:17:11.291
这是一个内积 

216
00:17:11.291 --> 00:17:15.620
我们在之前的幻灯片中已经至少见过两次 

217
00:17:15.620 --> 00:17:21.767
这是 phi 的梯度 因为这一项和这一项 

218
00:17:21.767 --> 00:17:26.270
这个 xt 和 yt 就是 ct 也就是曲线变形 

219
00:17:26.270 --> 00:17:30.623
所以我们得到了这个 我们还得继续做一步 

220
00:17:30.623 --> 00:17:34.870
对于 ct 我们知道它是啥 就是 VN 所以我们写下VN 

221
00:17:34.870 --> 00:17:39.967
这就是我们想要的曲线的运动 

222
00:17:39.967 --> 00:17:47.400
我们可以把 V 提出来因为它也是个标量 然后我们就有了这个 

223
00:17:47.400 --> 00:17:52.691
现在我们想要把所有的东西都写成关于 phi 的函数 

224
00:17:52.691 --> 00:17:55.472
这部分很重要 

225
00:17:55.472 --> 00:18:01.212
我们把法线看作梯度的归一化 

226
00:18:01.212 --> 00:18:01.930
那么 

227
00:18:01.930 --> 00:18:08.407
我们这里就直接用这个结论 我们可以把 

228
00:18:08.407 --> 00:18:11.720
负的法线用 phi 的梯度来替换 并且将其归一化 

229
00:18:11.720 --> 00:18:19.946
跟之前一样 这里是梯度乘以梯度 所以这就是梯度的平方 

230
00:18:19.946 --> 00:18:27.532
然后除以一个梯度 我们就得到了一个梯度(的模) 这些是梯度 这些不变 

231
00:18:27.532 --> 00:18:32.020
我们就得到了这个 因为这里有个负号 

232
00:18:32.020 --> 00:18:38.068
于是就跟这里的负号抵消了 所以我们得到了这部分等于这部分 

233
00:18:38.068 --> 00:18:40.400
然后就得到了我们想要证明的结论 

234
00:18:40.400 --> 00:18:46.011
大家可以仔细看看 如果大家想自己验证一下 

235
00:18:46.011 --> 00:18:50.747
现在可以暂停一下视频来看看这个证明 

236
00:18:50.747 --> 00:18:55.047
这里只是用了一下链式法则 并且把所有的东西都写成是 phi 的函数 

237
00:18:55.047 --> 00:19:00.148
这部分挺重要的 当我们想要根据V在法线方向上 

238
00:19:00.148 --> 00:19:05.940
移动曲线的时候就需要这个 这是由把 phi 上下移动得到的 

239
00:19:05.940 --> 00:19:09.978
不论公式表达了什么 然后我们取剖面 

240
00:19:09.978 --> 00:19:15.569
如果我们想要得到 t 等于 5 的情形 那就让 t 等于 5 

241
00:19:15.569 --> 00:19:18.830
找到零水平集 然后我们就得到了曲线演化 

242
00:19:18.830 --> 00:19:24.809
现在所有的东西都是隐式的 我们有这些定义在全平面的函数 

243
00:19:24.809 --> 00:19:30.555
通过移动这些函数 我们移动了零水平集  

244
00:19:30.555 --> 00:19:35.680
然后我们就得到了曲线演化 例如 我们可以得到主动轮廓 

245
00:19:35.680 --> 00:19:41.321
为什么这个很重要呢 让我们来看一些思想 

246
00:19:41.321 --> 00:19:46.517
我觉得这些会帮助我们了解为何这个很重要 

247
00:19:46.517 --> 00:19:52.621
回想一下 有时候我们把一个曲线变形的时候 其拓扑也会发生变化 

248
00:19:52.621 --> 00:19:59.137
现在我来问问大家 哪一种曲线运动会导致拓扑变化 

249
00:19:59.137 --> 00:20:05.406
会导致拓扑上的变化 是曲率运动？ 

250
00:20:05.406 --> 00:20:08.787
仿射运动？还是法线运动？ 

251
00:20:08.787 --> 00:20:14.002
我们知道其实是法线运动 法线运动可以改变拓扑 

252
00:20:14.002 --> 00:20:17.593
如果曲线的拓扑发生了变化 

253
00:20:17.593 --> 00:20:22.978
如果我们对曲线离散化 这就很难理解 

254
00:20:22.978 --> 00:20:28.433
这个点和这个点相邻 

255
00:20:28.433 --> 00:20:32.266
最终这个点变化到了这里 这个点变化到了这里 

256
00:20:32.266 --> 00:20:36.567
于是它们就不再相邻 它们之前还是相邻的 

257
00:20:36.567 --> 00:20:40.048
但是因为拓扑变化了 它们就不再相邻了 

258
00:20:40.048 --> 00:20:44.690
这时候数值分析会变得非常复杂 

259
00:20:44.690 --> 00:20:49.810
比如当相邻事件变成不相邻事件 

260
00:20:49.810 --> 00:20:54.383
非常非常复杂 现在我们有了这个 phi 函数 

261
00:20:54.383 --> 00:20:59.640
想象一下这些灰色的是 phi 函数 这两个绿色的平面 

262
00:20:59.640 --> 00:21:05.822
浅绿色的和深绿色的 就是在不同的时间切割 phi 函数 

263
00:21:05.822 --> 00:21:09.687
phi 函数根据 V 和 phi 的梯度运动 

264
00:21:09.687 --> 00:21:13.783
我们要做的就是不断地切割 

265
00:21:13.783 --> 00:21:17.106
然后对拓扑的变化感兴趣 

266
00:21:17.106 --> 00:21:20.430
我们并不需要担心连通性 

267
00:21:20.430 --> 00:21:26.160
完全不用担心 因为我们是在栅格上操作 如这里所示 

268
00:21:26.160 --> 00:21:31.155
我们并不操作粒子和离散曲线 

269
00:21:31.155 --> 00:21:38.277
也不用记住谁跟谁相邻 

270
00:21:38.277 --> 00:21:41.880
以及拓扑变化的时候相邻关系如何变化 

271
00:21:41.880 --> 00:21:48.297
我们完全不用做这些 我们只需要对定义在栅格上的 

272
00:21:48.297 --> 00:21:53.067
phi 函数进行操作 就像我们这里这样 这只是另一个轮廓 

273
00:21:53.067 --> 00:21:56.970
phi 函数在变化 phi t 也就是 

274
00:21:56.970 --> 00:22:03.169
V 乘以 phi的梯度 就这样 

275
00:22:03.169 --> 00:22:07.550
我们把这个离散化 就像我们之前离散化那样 

276
00:22:07.550 --> 00:22:11.789
它会上下移动 例如 我们想知道现在的 

277
00:22:11.789 --> 00:22:15.817
曲线演化的状态 我们直接切过去就可以了 

278
00:22:15.817 --> 00:22:20.834
然后我们在整个平面上寻找那些使得当前 phi 函数值为 0 的位置 

279
00:22:20.834 --> 00:22:24.650
我们探查每一个坐标 或者这里的每一个坐标 

280
00:22:24.650 --> 00:22:29.051
不管有没有拓扑变化 我们能够知道 

281
00:22:29.051 --> 00:22:34.438
这就是这个方法的漂亮之处 这就是我们在前一个视频 

282
00:22:34.438 --> 00:22:39.102
的最后提到的活跃轮廓是如何用这个实现的 

283
00:22:39.102 --> 00:22:44.728
其中V是主动轮廓的速率 所以V可以写成简化形式 g 和曲率 

284
00:22:44.728 --> 00:22:51.226
g 则是图像的倒梯度 或者其他使其停止的函数 

285
00:22:51.226 --> 00:22:55.307
所以我们想要实现主动轮廓的话 

286
00:22:55.307 --> 00:23:06.838
要做的其实就是 phi t 等于 g 曲率 乘以梯度的模 

287
00:23:06.838 --> 00:23:10.264
我们从前一张幻灯片可以知道 

288
00:23:10.264 --> 00:23:13.551
曲率可以用关于 phi 的函数计算出来 

289
00:23:13.551 --> 00:23:18.866
所以所有的东西都是定义在栅格上的这个曲面的函数 

290
00:23:18.866 --> 00:23:23.831
这就是水平集的优雅之处 它极大地简化了数值计算 

291
00:23:23.831 --> 00:23:28.446
有了它我们就可以实现曲率运动 法线运动 

292
00:23:28.446 --> 00:23:32.572
法线运动十分简单 让我把它写下来 

293
00:23:32.572 --> 00:23:38.764
phi t 等于 phi 的梯度 那么我们可以用之前讲过的 

294
00:23:38.764 --> 00:23:44.113
同样的方法来离散化梯度 用右边的像素减去中间的像素 

295
00:23:44.113 --> 00:23:47.850
用上面的像素减去中间的像素 

296
00:23:47.850 --> 00:23:52.100
对于 phi t 则用 phi(t + 1) 减去 phi(t) 

297
00:23:52.100 --> 00:23:55.158
任何形式的时域离散化 

298
00:23:55.158 --> 00:24:00.928
我们不会讨论过多的数值分析 比如有些相对标准的数值分析方法 

299
00:24:00.928 --> 00:24:04.451
大家可以在实现更加高明的数值分析的时候直接使用 

300
00:24:04.451 --> 00:24:10.446
用一些相对标准的方法来替代对整个曲线离散化 

301
00:24:10.446 --> 00:24:14.066
一些很简单的等式 

302
00:24:14.066 --> 00:24:18.895
就是做我们想要的很复杂的曲线演化和曲线运动 

303
00:24:18.895 --> 00:24:23.834
我只对曲线的情况做了证明 但是对于曲面来说是一样的 

304
00:24:23.834 --> 00:24:27.074
事实上曲面的公式跟这些公式完全一样 

305
00:24:27.074 --> 00:24:32.430
但是 phi 并非在更高的维度里 所以公式完全一样 

306
00:24:32.430 --> 00:24:35.604
现在我们有了做主动轮廓的工具了 

307
00:24:35.604 --> 00:24:40.762
在这周的接下来的视频里 

308
00:24:40.762 --> 00:24:44.928
我们将会看到更多的主动轮廓 但是我们已经知道了曲线演化 

309
00:24:44.928 --> 00:24:47.639
以及如何实现曲线演化 

310
00:24:47.639 --> 00:24:53.142
我们学了很多的新东西 大家可以倒回去再看看视频 

311
00:24:53.142 --> 00:24:57.704
这些证明都是些很短的证明 

312
00:24:57.704 --> 00:25:03.250
其中只涉及了很简单的微积分和代数 

313
00:25:03.250 --> 00:25:08.405
大家不用关心这个 

314
00:25:08.405 --> 00:25:11.863
我只是在这个视频和前一个视频里稍微解释一下 

315
00:25:11.863 --> 00:25:16.235
那让我们继续前进 希望能在下一个视频里继续看到大家 

316
00:25:16.235 --> 00:25:17.540
谢谢大家 【未完成版本】 
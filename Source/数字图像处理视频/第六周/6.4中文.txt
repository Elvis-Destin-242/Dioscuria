欢迎回来 在这个视频里 我们将学习 曲线演化 这个概念将 有助于对前面几周所提到的主动轮廓的理解 正如我们前几个视频中提到的那样 什么是曲线演化 这个概念非常简单 基本思想就是像我们这里看到的一样 有一条曲线 曲线上每个点都对应一个速度向量 来表明曲线是如何运动的 可以用这个方程来表示 这是一个偏微分方程 如果用更详细的形式表达的话 称之为这条曲线的导数 要记住 这条曲线的参数是p 对时间t求导 因此曲线随时间变化 这个式子等于固定的速度向量 速度向量的参数是给定的点p 并随着时间t变化 这才是完整的方程 这是个偏导数方程 我们把它简写成这种形式 用下角标来表示导数 所以在每一点上曲线都在改变 有些时候我们的曲线是这样的 或者是像这样一条蓝色曲线 亦或是 像这样的一条绿色曲线 这取决于每一个点的速度向量 我们来看这种类型的曲线变形 要记住 曲线是形状的分界线 这种变形为我们带来 一些在图像或视频中极其有趣的变化 那让我们来看一下它的特征 我将会用几个例子来描述这一概念的重要性 第一个重要特征是跟踪 我们有每个点的速度向量 即变形速度向量 速度向量在运动方向上的向量 分解后沿曲线的法线方向 或者说是垂直方向 我们已经定义了法线和切线 因此可以把向量分解成 法线和切线方向的分量 结果表明这个方向上（切线方向）的分量 并不会改变曲线形状 所以这个分量和形变无关 因此这里所写的式子 是一般方程 但我们把速度向量投影到法线方向 投影仅沿着法线方向运动 从几何观点来说 最常见的变形就是 沿曲线的法线方向的变形 你可以在切线方向增加速率 但却改变不了曲线的形状 要记住 正切影响的是 曲线变化的速率 有了这些概念 我们可以知道 这也是一种速度的变化 但它仅仅沿着曲线移动 它们不见得会引起曲线形状变化 因此我们通常把曲线演化 表示成法线方向上的变化 这才是我们所关注 有时为了方便理解 如果喜欢 也可以加入切线分量 随你所愿 因为它们并不会改变曲线形状 例如 如果曲线是这样运动的 Ct等于某些包含正切方向分量的函数 而不含法线分量 这样一点也不会改变曲线的形状 就好像是一直在绕着曲线跑 但最终对曲线形状 并没造成什么影响 因此形状还是由法线方向决定 让我们来进一步探讨 先看几个例子 顺便说一下 这些性质 并不难证明 大家愿意的话可以自己做个练习 我们首先探讨的是“曲率运动” 法线方向上的形变是与 这个点的曲率成比例的 在我们了解 这种类型的变形前 先做一些铺垫 对于曲线的二阶导数 我们对它的欧氏弧长求导 就是这个 曲线的二阶导数 就是和曲线垂直的向量 这些向量的大小就是曲率 因此对这个变形而言 就好像一阶导数 恰好等于弧长的二阶导数 这要求对微分方程有所了解 这被称为“热流” 由于弧长 基于较强的几何特性 因此确切形式应该是 dC比上dt 等于 C对弧长所求的二阶导数 明白了吗？ 很有趣吧 曲线的变形 首先是欧氏空间的不变量 曲率就是欧氏空间不变量 就是说旋转和移动 都不会改变的量 法线同样也是欧氏空间不变量 因此如果旋转平移 或者欧氏变换 如果是进行这样一个变化 和这样一种变化 以及这种 依照这样的变换方式 曲线会进行完全一样的旋转和平移 因此当开始旋转一组曲线时 通过这种运动方式同时进行 无论任何时候停下来 曲线旋转和平移的变化都是一致的 百试不爽 旋转和平移是无法改变这些属性的 这种运动方式能对曲线进行意想不到的操作 这一点已经被无数次地证明了 最早是由Grayson二十多年前证明的 无论对于什么样的曲线 只要不是自相交的 就是所谓的简单曲线 形状是有边界的 对于一个曲线来说 如果按照这个公式变化 这个曲线就会变为凸曲线 它就像被打开了一样 变成一种非常平滑的凸形曲线 当成形成凸曲线以后 如果继续这样变化的话 就会变成一个圆形 最终会变成一个圆点 它会不断缩小 直到慢慢消失 换句话说 收缩是与曲率成正比的 到最后看上去就和一个圆点一样 因此如果一直向外扩张它 一直保持其区域范围 将会看到它变得越来越圆 因此无论看到的曲线形状 是多么的夸张和复杂 只要它不是自相交的 那么它就会展开 然后变得越来越光滑 直到它变成一个圆 记住 圆的曲率是常数 而这却源自一个奇形怪状的曲线 比方说这个乱七八糟的曲线 只要一直这么做 就会让它越来越光滑 变得看上去顺眼些 这实际上是规则化曲线 如果能不厌其烦一直处理下去 就会变成一个圆 一个有着固定曲率的圆 大家应该知道 热流携带热量 无论热量分布如何 最终会在房间里形成稳定状态 放在这里来说 就是无论曲线的曲率如何 最终都会变为常量 即半径的倒数 想变成这样需要进行多少步？我们一会儿就会知道 别担心 要证明曲线完全 塌陷成这个圆点所需要的步数 是很容易的 在证明之前 让我们举几个另外的例子 在欧氏几何的前提下 什么是仿射状态？仿射状态就是得到这个函数 这就是欧氏曲率 如何得到的这个方程？让我在这里写一下 我们先像以前一样写出这个式子 不同的是 现在要对仿射弧长求二阶导数 并不需要和曲线保持垂直 但我们也知道正切分量无关紧要 因此必须求这个的投影 在之前的视频中我们已经了解过 仿射法线 也就是二阶导数得到的欧氏法线等于 Κ的1/3次幂 即曲率的1/3次幂 所以 这两个方程从几何角度来说 是等价的 它俩是绝对相等的 然而这个方程的正切方向对曲线没有影响 因此 把它投影到法线方向 我们就得到了这个漂亮的方程 看上去像是欧氏空间里有一个神奇的指数 使其保持仿射不变 换言之 如果我有一个形状 想把它通过仿射变换 变成这个形状 所以就对它们俩进行了变换 于是它们就一直进行着相同的仿射变换 这就是一种仿射不变 因此我们可以通过这种规则化的方式 在仿射变换中来平整曲线 即保持镜头倾斜度不变 正如我们之前讨论的一样 我们假设仿射模型是一个好模型 现在你可以证明一些有趣的特性 与欧氏条件下相似 无论这个曲线是什么样的 它都会变成凸曲线 然后变成 一个椭圆 但不是一个圆 在仿射域中 圆和椭圆 会变成一样的 因为圆经过仿射变换就变成了椭圆 同时 边缘也是恒定的仿射曲率 这里的所讨论的μ就是指仿射曲率 如欧氏条件下一样我们可能从稀奇古怪的仿射曲率开始 然后慢慢地让这个怪异的仿射曲率变化 直到形成恒定的仿射曲率 这就是为什么这一部分叫做仿射热流 把曲率从差异很大 最终统一起来 还有另一个非常有趣的运动 还没有被明确定义 也是平整曲线或是平整形状 的一种方法 然而不是每种运动都是这样的 拿最简单运动来说 在法线方向上每一个点 移动每一步 都保持匀速 也不关心曲线的曲率 仅是一步一步一个点一个点地移动 这是一个非常重要的方程 是创建等距曲线的等式 意味着你创建一条 和之前曲线平行的曲线 你既可以在里面移动 也可以在这里填个减号 使其在外面移动 这样你就可以创建另一条平行曲线了 时时刻刻都是等距的 如果你要继续取另一条等距曲线 再往里取另一条等距曲线一直到你不再取为止 这同时也是一个微分方程 你可以决定停止还是继续计算 这个曲线是通过 这个变形方程得到的 但也可以通过下面的方法获得 你可以以曲线上的点为圆心按照给定半径做圆 圆上的每个点都是以相同半径做出的 然后可以通过这些圆所构成包络线  得到 恒定的运动变化 类似现象在物理学上称作 惠更斯原理 指波在没有障碍物的情况下 是如何传播的 如果你做过这个物理实验的话 这种恒定运动就如同 惠更斯原理中光的传播一样 因此你可以把这个曲线比作波 你也许知道在惠更斯原理中波在没有障碍物的情况下 的运动原理 这种曲线演化就讲到这里 这种演化在图像处理中很重要 而且它还能够解释 很多非常有趣的物理现象 恒定运动 这种恒定运动很有趣 比方说，它可以改变曲线的 拓扑结构 如果你从外面这条曲线出发 匀速向内运动的话 一会这个曲线就会分成两半 这是在欧氏或者仿射的曲率运动不可能出现的 曲率运动中曲线保持简单和光滑 而这里却把它分成两部分 就像波也能够分成两部分一样 还有更多可能发生的事情 如果你从一条光滑的曲线向内运动 过一会两边就会 折叠起来 这里不存在曲率的概念 难以理解的是曲率会变得非常非常高 从而趋向于折叠 趋向于形成夹角 角的曲率可是无穷大的 变化得非常快 曲率的概念 在这里是不存在的  几次计算过后 就会折叠 称之为“冲激” 这个概念来自波 当波在传播过程中发生折叠 就能够产生出这些冲激 这不会在理想状态和欧氏状态下 的曲率运动中发生 曲率运动中曲线一直保持光滑 永远也不会发生折叠 恒流产生了这种折叠 通过这两个极端例子可以看出恒流能够改变拓扑结构 能够折叠物体 产生夹角 好 曲率规则化、夹角分离化 也许能够锐化形状 这两种运动方式的选用取决于 我们想在图像处理中做什么 现在我们有了 曲率运动的方式 我又把它们写在这了 让你能记住这些公式 我们有了恒流 没有写速度 这里速度是1 欧氏曲率流 仿射流 恒定运动能够分开曲线 能够形成冲激 能够形成夹角 第二种梯度的规则化能够把所有曲线转化成圆 仿射的规则化 能够把所有曲线变成椭圆 什么样的椭圆呢？ 我们也不知道 在仿射空间中所有的椭圆都一样 现在 我们可以写变化的很多特性出来 这仅仅是 兴趣所致 有时它们在图像处理中非常管用 有时它会让曲线变得好看 我们还要关注的一点是 这些曲线在欧氏状态下可以折叠 仅仅进行一些 微积分运算 因此不算太难 如果你要用这种变形 只需考虑速度V的法线变形 举个例子，曲线长度L 是如何改变的 它会发生怎样的变化？ 因此我们要对长度L求导 曲线的长度是指 环绕曲线一整周的区间 用符号∮来表示 绕曲线一周 这里我们所讨论的是闭合曲线 因此要求绕曲线一周的长度 这里就是求长度的函数 现在我对尖括号里的项求导 这里用第一项的导数乘以 第二项+第二项乘以第一项 左右对称 这就是为什么我们要求得这两项 接下来看这里 我们要 调换这里导数的顺序 先对CP求导数 然后对 求导数 就可以调换这两项了 经过一系列运算 最终能够得到这个表达式 这个表达式决定了长度的变化 我们可以下面的例子来看一下不同V 我们可以用同样的方法来计算区域面积 用外积 或者行列式来替代内积 我们可以用两个向量 用矩阵的行列式 来计算区域面积 我们也可以计算曲率的变化 这些都是适用的问题 我不想花费太多时间完整证明这些式子 它们都不太难 而且 我提到的书中都有相应的例子 这些式子是 计算长度、区域面积、曲率的 一般公式 这个式子可是一个非常有趣 公式 在某些情况下 称之为“反应扩散方程” 这一方程 被人们用来对皮肤、条纹的模式进行建模 它是一种扩散的概念 这里这个V也是冲激概念的一种 让我们来举几个例子 看看不同V的区别 比如当V=1时 就会保持恒定运动 对于恒定运动来讲V=1 长度L的变化 我们令V=1 对整条曲线 从0到L积分 整条闭合曲线曲率的积分等于2π 这是微分几何学中的基本定理 换句话说就是长度以恒定速率变化 长度变化保持不变 也就是说长度的导数是个常数 如果你 把这两个式子合并 将会告诉你何时 你能够看到意想不到的事情发生 也就是变化发生的时间 因此你可以选择写出带初始长度的方程 或者带时间的方程 都可以用这里的式子表示出来 面积区域的一般方程中 令V=1 从0到L积分 结果为L 因此面积的变化是和长度成比例 而长度却是变化而不是常数 上面式子是常数 而这个不是 面积的变化率和长度成比例 对于曲率来说 这是它的一般方程 它的导数等于 它的平方 因为V是常数 因此二阶导数就把V消去了 现在你可以利用变化的时间等于曲率的平方来解决 曲率导数的等式了 最后求解的结果就是这个等式 看看会发生什么 这个式子中曲率变化受阻 变为无穷大 当t等于原曲线曲率的导数时 就产生了所谓的冲激 换言之 波向内聚集产生碰撞后发生了折叠 产生了极高的接近无穷的曲率 那会怎么样呢 当这一项为0的时候 当t等于这个点的无限大曲率的倒数时 曲率倒数也就是半径 因此你应该清楚什么时候冲激会产生 什么时候这些波会从两边向中间折叠 从最初的曲线开始 然后以这种形式得到曲率 什么时候会发生那样的情况？ 当曲率趋于无穷大时 从两边 向内折叠 哦！时间就是曲率的倒数 曲率越大 这个过程所用的时间就越短 因此如果你发现你的取值使其非常快地接近一个角时 冲激就会产生 从这些方程中 你能够理解 整个过程 你当然可以在欧氏状态下求曲率流 再说一遍 你在这种情况下带入同一个方程 这是面积的一般方程 速度相当于曲率 积分后 得到曲率的积分是个常数 因此你知道这是恒定运动 长度是以恒定速率变化 在欧氏曲率运动中的面积是以 恒定的速率变化 我可以通过这样的方式 明确的告诉你 当曲线在t时刻折叠时 面积会变为无穷大 最终分裂为两部分 因此面积区域无穷大时 然后除以2π 这时整个曲线就变成了一个点 这种运动 和恒定运动不同的是把一切折叠成一个点时 一切都是光滑的 变得越来越平整知道形成一个圆点 这时候的时间也可以精确求出 这就是为什么这些公式 对于理解长度、面积、曲率如何变化 有着重要意义 这都是些非常非常有趣的 特性 我们也可以在仿射状态下 有了这些公式 却没有一种 清晰的方法能够求解这种积分 也只是有这些公式 而不能得到常量 尽管常量能够说明一些事情 我们在这里还是不要讨论了 现在我们掌握了这些运动的特性 一种运动 诸如 曲率运动曲率运动、常量运动等 我们所要讨论的主动轮廓 不外乎这些变形的一种 我举一个主动轮廓速度的例子 当我们 在学习下一节视频“变分法”以后 我们就能够 用一种更好的方式导出这种运动状态  不过现在我就能写出来 然后解释这个公式 这一块就是V 我在这里标出来 这个式子看上去很长 但无外乎法线方向特定的速度造成的变形 里面这些项都是什么意思呢？ 对于这个曲线 按照特定的速度 来变形 都涉及到哪些项？ 这一项是曲率 没问题吧 这我们已经知道了 n是法线 诺 这项就是法线 那么g是什么？ g是取决于图像的一个函数 例如 图像梯度的倒数 为什么我们需要这个函数？ 这里先不谈这个函数 把这一项先放一边 我们假设这个函数不存在 就得到Ct等于K 即曲率 收缩到一个点  我不打算这样 我想让这条红色的曲线 最终能够 收缩到这些物体形状的边界上 我可不想让它收缩成一个点 那么怎么办呢？ 我让它在较高梯度时就停止收缩 就另g与图像梯度的导数成比例 那么 我想要一个非常清晰的分界线 梯度就要求很高 我们假设梯度无穷大 g就等于0 因此曲率就一直收缩收缩 直到乘以0停止 然后它说 啊！我不能再动啦 我必须停下来 我没有速度了 这就是为什么要有这一项 从来不会有理想的形状 因此这个g的导数 要记住g是图像导数的倒数 例如 梯度或者其他类型的函数 你用另一种方式求导 使其速度停止项更强大 甚至没有完美的边界 这也不会为0 你相当于通过二阶导数 得出了一个势能谷 当然不必非得沿法线方向 因此你必须投影到法线方向 每当式子中不含法线方向时 我们必须 投影到法线方向 这是曲率运动中 尤其值得注意的 这是对主动轮廓的 简要描述 这是曲率运动 在法线方向上乘以g g是你图像的一个函数 当梯度非常高的时候就提示停止 第二项仅仅 使停止过程更强大 前几周我们所看到过主动轮廓 现在我们在微分几何学的基础上探讨 在曲率、曲线运动以及物体变形的基础上探讨 为什么这样做呢？ 一个原因就是要获得主动轮廓 在微分几何学上这 你已经是个专家了 在曲线演化、曲线构成上 你也是个专家了 就这么简单 你必须记下来 如果我给你五分钟时间让你 给曲线演化运动获取主动轮廓下个定义 你们中大多数人可能会用这种方式定义 让形状更光滑 不断向物体移动 一旦接触到物体就停止 人们已经衍生出 各种各样的解决方案 但这个概念仍是最基础的 你可以加入一些恒定运动 能够帮助你移动得更快 要注意的是 你可以得到冲激 也可以继续移动 这都取决于图像 而不仅仅取决于 曲线的形状 图像这才是停止的条件 你可以进一步用曲线演化中做些非常有趣的尝试 来获得主动轮廓 现在我们知道如何 定义这些特性 对曲面也一样 因此我们能够在曲面上这样做 这里有一个曲面演化的例子 这是曲面从这里开始演化的照片 它不断变形不断变形 最终套在了一起 像两枚戒指一样 相互重叠 这种运动是我写出来的唯一的一种运动 但在曲面区域这里 都是理想的物体 黑白分明 因此梯度非常明显 梯度的倒数会非常小 当我进行曲面演化时 dS/dt等于 曲率的一种 可以是高斯分布 也可以取均值 这里究竟该是什么样的曲率 法线方向 不断移动移动移动 然后 这里有个g 会告诉你当梯度很高的时候 该停止了 这仅仅是人造的例子 在成为曲线演化专家的路上 我们将会看到更多主动轮廓的例子 要我说微分几何学就是这种演化的快照 有很多有趣的数学工具 帮助我们找到主动轮廓 它们是图像分割技术中最有效的技术之一 上周我们已经看到很多例子 我们还将会看到更多的应用 现在我们都是曲线演化方面的专家了 很期待在之后的视频中看到你 届时我们将共同学习 构建帮助我们 理解关于主动轮廓、变形类型以及之后材料 一切的工具 非常感谢大家 我们下个视频见